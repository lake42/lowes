xmlFile="Export.xml";$(function(){$.ajax({type:"GET",url:xmlFile,dataType:"xml",success:function(xml){$('.load').hide('fast');shebang();function shebang(){eventD();versionD();pageD();blockD();buildDetails(1);}function eventD(){u=$(xml).find("Event");u.each(function(){eventid=$(this).attr("EventID");eventname=$(this).attr("EventName");b=$('<option value="'+eventid+'">'+eventname+'</option>');$("#events").append(b);});$("select[id='events'] option:eq(1)").attr('selected','selected');}function versionD(){x=u.find("Version");x.each(function(){patcharea=$(this).attr("PatchArea");p=$('<option value="'+patcharea+'">'+patcharea+'</option>');$("#patcharea").append(p);});$("select[id='patcharea'] option:eq(0)").attr('selected','selected');}function pageD(){currVersion=$("#patcharea").val();n=u.find("Version[PatchArea='"+currVersion+"']").children('Page');n.each(function(){page=$(this).attr("Page");s=$('<option value="'+page+'">Page-'+page+'</option>');$("#pages").append(s);});$("select[id='pages'] option:eq(0)").attr('selected','selected');}function blockD(){var currVersion=$("#patcharea").val();var currPage=$("#pages").val();y=u.find("Version[PatchArea='"+currVersion+"']").children("Page[Page='"+currPage+"']").children("Block");y.each(function(){block=$(this).attr("Block");ss=$('<option value="'+block+'">Block-'+block+'</option>');$("#blocks").append(ss);})$("select[id='blocks'] option:eq(0)").attr('selected','selected');}function buildDetails(state){event=$("#events").val();patch=$("#patcharea").val();page=$("#pages").val();block=$("#blocks").val();z=u.find("Version[PatchArea='"+patch+"']").children("Page[Page='"+page+"']").children("Block[Block='"+block+"']").children("Item");zz=u.find("Version[PatchArea='"+patch+"']").children("Page[Page='"+page+"']").children("Block[Block='"+block+"']").children("Item");crumb=$("<span>PatchArea "+patch+" &raquo; Page "+page+" &raquo; Block"+block+"</span>");if(state==1){$("#large").empty();$("#specific").empty();$("#crumb").empty();ttt=$("<img class='large' src='"+zz.first().attr("ImageUrl500")+"' />");itemZ=zz.first().attr("ItemNum")$("#large").hide().append(ttt).fadeIn();$("span").remove(":contains('Item #:')");if(typeof itemZ!='undefined'){specs=$("<span class='spec'>Item #:"+itemZ+" | </span> ");$("#crumb").append(specs);}}z.each(function(){var copy=$(this).attr("Copy");var itemNum=$(this).attr("ItemNum");var wasPrice=$(this).attr("WasPrice");var nowPrice=$(this).attr("NowPrice");var thumbUrl=$(this).attr("ImageUrl72");var imageUrl=$(this).attr("ImageUrl500");var logoSmall=$(this).attr("LogoUrl72");var logoBig=$(this).attr("LogoUrl500");var modelNum=$(this).attr("ModelNumber");var uom=$(this).attr("UOM");var br="<br />";if(typeof $(this).attr("ModelNumber")=="undefined"){modelNum=""}else{modelNum="Model #: "+modelNum+br;}if($(this).attr("ImageUrl72")==""){thumbUrl="";}else{thumbUrl="<img id='"+imageUrl+"' item='"+$(this).attr("ItemNum")+"' copy='"+$(this).attr("Copy")+"' class='thumb3' src='"+thumbUrl+"' />";}if(typeof uom=="undefined"){uom="";}else{uom="/"+uom;}if(typeof wasPrice=="undefined"){wasPrice="";}else{wasPrice="Was: "+wasPrice+uom+br;}if(typeof nowPrice=="undefined"){nowPrice="";}else{nowPrice="Now: "+nowPrice+uom+br;}if((typeof $(this).attr("WasPrice")=="undefined")&&(typeof $(this).attr("NowPrice")=="undefined")&&(typeof $(this).attr("UOM")!="undefined")){wasPrice="UOM:"+$(this).attr("UOM");}if((typeof $(this).attr("WasPrice")=="undefined")&&(typeof $(this).attr("NowPrice")=="undefined")&&(typeof $(this).attr("UOM")=="undefined")){wasPrice="";}if(typeof copy=="undefined"){copy="";}else{copy="Details: "+copy+br;}if(typeof itemNum=="undefined"){itemNum="";}else{itemNum="Item #: "+itemNum+br;}if(logoSmall==""){logoSmall="";}else{logoSmall="<img id='"+logoBig+"' class='thumb3' src='"+logoSmall+"' />";}var m=$("<div class='item'>"+logoSmall+thumbUrl+"<div class='txt'>"+itemNum+copy+modelNum+wasPrice+nowPrice+"</div></div>");$("#details").append(m);$("#crumb").append(crumb);});}$("#events").change(function(){$("#patcharea").empty();$("#pages").empty();$("#blocks").empty();$("#details").empty();$("#crumb").empty();$("#specific").empty();versionD();pageD();blockD();buildDetails(2);});$("#patcharea").change(function(){$("#pages").empty();$("#blocks").empty();$("#details").empty();$("#crumb").empty();$("#specific").empty();pageD();blockD();buildDetails(1);});$("#pages").change(function(){$("#blocks").empty();$("#details").empty();$("#crumb").empty();$("#specific").empty();blockD();buildDetails(1);});$("#blocks").change(function(){$("#details").empty();buildDetails(1);});$(".thumb3").live('click',function(){uuu=$(this).attr("id");itemF=$(this).attr("item");cpy=$(this).attr("copy");$("#large").empty();$("#specific").empty();ttt=$("<img class='large' src='"+uuu+"' />");$("#large").hide().append(ttt).fadeIn();$("span").remove(":contains('Item #:')");if(typeof itemF!='undefined'){specs=$("<span class='spec'>Item #:"+itemF+" | </span>");$("#crumb").prepend(specs);}});}});});